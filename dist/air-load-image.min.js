/*
 * Air load image - v2.0.0
 * Description: Lazy loading of images and the background when scrolling
 * author.name: mero.push
 * author.email: mero.push@gmail.com
 * https://github.com/meroPush/air-load-image
 * Created: Fri Jun 30 2017 03:36:34 GMT+0300 (EEST)
 */

!function(t,i,o){function e(i,o){this.elements=i,this.offset=0,this.windowHeight=0,this.options=t.extend({},s,o),this._defaults=s,this._name=n,this.init()}var n="airLoadImage",s={offset:"75%",delay:750,pluginId:"airLoadImage"};e.prototype.getOffset=function(){var t;return t="string"==typeof this.options.offset?parseFloat(this.options.offset)*this.windowHeight/100:this.options.offset,this.offset=-t,-t},e.prototype.updateWindowHeight=function(){return this.windowHeight=o.documentElement.clientHeight,this.windowHeight},e.prototype.throttle=function(t,i){function o(){return s?(e=arguments,void(n=this)):(t.apply(this,arguments),s=!0,void setTimeout(function(){s=!1,e&&(o.apply(n,e),e=n=null)},i))}var e,n,s=!1;return o},e.prototype.init=function(){function e(t){n.getOffset(),"resize"===t.type&&n.updateWindowHeight(),s.call(n)}var n=this,s=this.throttle(this.showVisible,this.options.delay);t(o).on("scroll."+this.options.pluginId,e),t(i).on("resize."+this.options.pluginId,e),this.getOffset(),this.updateWindowHeight(),this.showVisible()},e.prototype.checkVisible=function(t){var i=t.getBoundingClientRect(),o=i.top>0&&i.top+this.offset<=this.windowHeight,e=i.bottom>this.offset&&i.bottom<=this.windowHeight,n=i.top<0&&i.bottom>this.windowHeight;return o||e||n},e.prototype.showVisible=function(){for(var t=this.elements,i=0;i<t.length;i++){var o=t[i],e=o.getAttribute("data-air-img");e&&this.checkVisible(o)&&("IMG"===o.tagName?o.src=e:o.style.backgroundImage="url("+e+")",o.setAttribute("data-air-img",""))}},e.prototype.reInit=function(){this.destroy(),this.init()},e.prototype.destroy=function(){t(o).off("scroll."+this.options.pluginId),t(i).off("resize."+this.options.pluginId)},t.fn[n]=function(i){if(!t.data(this,"plugin_"+n))return t.data(this,"plugin_"+n),new e(this,i).elements}}(jQuery,window,document);